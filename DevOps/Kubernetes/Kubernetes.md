Назад к: [[DevOps]]

---
## Содержание:

^3aef8d

[[Kubernetes#^14a421|Общая информация]]
[[Kubernetes#^9f3498|Ключевые моменты]]
[[Kubernetes#^071f26|Основные понятия]]
[[Kubernetes#^fbb34a|Как работает]]
[[Kubernetes#^8f97e4|Возможные вопросы]]

---
## Общая информация:
Kubernetes — это система оркестрации контейнеров с открытым исходным кодом, созданная для автоматизации развёртывания, масштабирования и управления контейнерными приложениями. Она организует контейнеры в поды, которые распределяются по кластерам и могут масштабироваться в зависимости от нагрузки. Kubernetes предоставляет такие возможности, как автоматическое восстановление сервисов, балансировка нагрузки, управление конфигурацией и секретами, что упрощает развертывание и эксплуатацию облачных приложений.

[[Kubernetes#^3aef8d|К содержанию]]

---
## Ключевые моменты:
- **Оркестрация контейнеров** – автоматизирует развертывание, управление и масштабирование контейнеров.
- **Масштабирование и самовосстановление** – автоматически масштабирует поды и восстанавливает упавшие контейнеры.
- **Балансировка нагрузки** – распределяет трафик между подами для равномерной загрузки.
- **Управление конфигурацией и секретами** – позволяет безопасно управлять чувствительными данными.
- **Разделение по пространствам имен** – поддерживает многопользовательские среды через namespaces.
- **Обновление и откат** – обеспечивает безостановочное обновление приложений и откат на предыдущую версию.
- **Интеграция с различными инфраструктурами** – работает как в облачных, так и в локальных средах.

[[Kubernetes#^3aef8d|К содержанию]]

---
## Основные понятия:
- **Кластер** – группа узлов(нод) (виртуальных или физических машин), объединенных для работы под управлением Kubernetes. ^69a669
- **Узел (Node)** – отдельная машина в кластере, где запускаются поды. Может быть виртуальной или физической. ^e11fb4
- **Под (Pod)** – минимальная единица в Kubernetes, представляющая собой один или несколько контейнеров, которые работают вместе и разделяют сеть и хранилище. ^b38bf8
- **Secret** – объект для хранения чувствительных данных (например, паролей, ключей), которые могут быть использованы подами.
- **ConfigMap** – объект для хранения неконфиденциальных данных конфигурации, которые могут быть использованы подами.
- **Kubectl** – командная утилита для управления Kubernetes-кластером. С ее помощью можно выполнять команды, такие как развертывание приложений, мониторинг ресурсов и изменение конфигураций. ^82576b
- **Dashboard** – веб-интерфейс для управления и мониторинга кластера. Dashboard предоставляет графический интерфейс для выполнения основных операций в кластере и отслеживания состояния подов, служб и других ресурсов.
- **Служба (Service)** – абстракция, обеспечивающая постоянный IP-адрес и DNS-имя для доступа к набору подов.
- **Контроллер (Controller)** – компонент, поддерживающий желаемое состояние ресурсов (например, ReplicationController или Deployment). ^e4e618
- **Deployment** – ресурс для управления развертыванием и обновлением подов с поддержкой масштабирования и откатов.
- **ReplicaSet** – объект, который обеспечивает заданное количество копий (реплик) подов.
- **Namespace** – пространство имен, позволяющее разделять ресурсы кластера между различными пользователями или окружениями.
- **Ingress** – ресурс, позволяющий управлять внешним доступом к сервисам кластера (например, HTTP/HTTPS).
- **Volume** – абстракция для работы с хранилищем, предоставляющая подам доступ к постоянным данным.
- **Kubelet** – агент, запускающийся на каждом узле кластера. Он отвечает за поддержание заданного состояния подов (запускает контейнеры, проверяет их статус) в соответствии с инструкциями от API Server. ^cbc3b1
- **Kube-proxy** – сетевой прокси, работающий на каждом узле кластера. Он управляет сетевыми правилами для обеспечения связи между подами и сервисами, выполняя маршрутизацию трафика к соответствующим подам. ^f74d39
- **Container Runtime** – программное обеспечение, ответственное за запуск контейнеров. Kubernetes поддерживает различные контейнерные рантаймы, такие как Docker, containerd и CRI-O.
- **API Server** – основной компонент, обеспечивающий взаимодействие между различными компонентами Kubernetes и внешними клиентами. Он обрабатывает запросы через REST API, управляет состоянием кластера и хранит данные в etcd. ^9e0c07
- **Scheduler** – компонент, отвечающий за назначение подов на узлы в кластере. Он выбирает оптимальный узел для запуска каждого пода, исходя из доступных ресурсов и политик. ^b35c72
- **Kube Controller Manager** – набор контроллеров, управляющих различными аспектами кластера (например, контроллер репликации, контроллер узлов). Эти контроллеры обеспечивают поддержание состояния кластера в соответствии с желаемой конфигурацией.
- **Cloud Controller Manager** – контроллер, который взаимодействует с облачными провайдерами для управления ресурсами, такими как узлы, балансировщики нагрузки и маршруты, специфичными для облачной инфраструктуры. ^42c5df
- **etcd** – распределенное хранилище данных, используемое для хранения всех данных состояния Kubernetes-кластера. Оно гарантирует консистентность данных, необходимых для управления кластером.

[[Kubernetes#^3aef8d|К содержанию]]

---
## Как работает:
1. **Мастер-[[Kubernetes#^e11fb4|узел]]** (мастер-нода) управляет [[Kubernetes#^69a669|кластером]] и включает компоненты [[Kubernetes#^9e0c07|API Server]], [[Kubernetes#^b35c72|Scheduler]] и Controller Manager, которые отслеживают состояние [[Kubernetes#^69a669|кластера]] и распределяют [[Kubernetes#^b38bf8|поды]] на [[Kubernetes#^e11fb4|узлы]].
2. **Рабочие [[Kubernetes#^e11fb4|узлы]]** запускают [[Kubernetes#^b38bf8|поды]] с контейнерами. На каждом узле работает агент [[Kubernetes#^cbc3b1|Kubelet]], который взаимодействует с мастер-узлом, и [[Kubernetes#^f74d39|Kube-proxy]] для маршрутизации сетевого трафика.
3. Пользователь или система подают команды через [[Kubernetes#^82576b|kubectl]] или [[Kubernetes#^9e0c07|API Server]], описывая желаемое состояние (например, сколько [[Kubernetes#^b38bf8|подов]] запустить, какие контейнеры использовать).
4. **[[Kubernetes#^b35c72|Scheduler]]** выбирает [[Kubernetes#^e11fb4|узлы]] для запуска [[Kubernetes#^b38bf8|подов]], а [[Kubernetes#^e4e618|контроллеры]] поддерживают нужное количество [[Kubernetes#^b38bf8|подов]] и их состояние.
5. Kubernetes автоматически масштабирует, восстанавливает и балансирует нагрузку на контейнеры, обеспечивая их стабильную и отказоустойчивую работу.

[[Kubernetes#^3aef8d|К содержанию]]

---
## Возможные вопросы:

^885a61

1. [[Kubernetes#^e35ac8|Что такое контейнеры? Чем они отличаются от виртуальных машин?]]
2. [[Kubernetes#^a22bd8|В чем разница stateful и stateless?]]
3. [[Kubernetes#^d7e87b|Что такое Kubernetes и зачем он нужен?]]
4. Как Kubernetes соотносится с Docker?


---
1. **Что такое контейнеры? Чем они отличаются от виртуальных машин?**
	Контейнеры — это сущность, которая содержит в себе все зависимости (системные библиотеки, сторонние пакеты кода и прочее), необходимые для запуска приложения. Контейнеры позволяют быстро запускать приложения без оглядки на окружающую среду.  
	И контейнеры, и виртуальные машины — это технологии виртуализации ресурсов.  
	Основное различие контейнеров и виртуальных машин заключается в том, что виртуальные машины виртуализируют весь компьютер/сервер вплоть до аппаратного уровня. На виртуальную машину можно установить любую гостевую ОС, и она может быть отличной от ОС компьютера/сервера.  
	Контейнеры же виртуализируют только то, что выше уровня операционной системы. То есть контейнеры делят друг с другом ядро операционной системы, которая установлена на сервере. Благодаря этому контейнеры занимают меньше ресурсов и быстрее запускаются. В то же время контейнеры не так изолированы друг от друга, как виртуальные машины. ^e35ac8
[[Kubernetes#^885a61|К списку вопросов]]
2.  **В чем разница stateful и stateless?**
	Если говорить применительно к приложениям, то Stateful-приложение — это то, которое сохраняет данные при работе как состояние внутри себя. Примером могут быть сессии пользователей, которые хранятся на сервере. Ответ на запрос пользователя зависит от состояния сессии.  
	Такие приложения сложнее масштабировать горизонтально: чтобы развернуть несколько экземпляров, нужно переносить состояния на новые машины и синхронизировать их.  
	Stateless — любой запрос к приложению уникален, а его ответ не зависит от какого-либо состояния приложения. Stateless-приложения легко масштабируются горизонтально, упрощают автоматизированное тестирование, так как нет состояния, которое нужно воспроизводить. ^a22bd8
[[Kubernetes#^885a61|К списку вопросов]]
3. **Что такое Kubernetes и зачем он нужен?**
	Kubernetes — это open-source-платформа для автоматизированного запуска, масштабирования и управления контейнеризированными приложениями.  
	С помощью Kubernetes можно:  
	- запускать приложение в контейнере на нескольких серверах/площадках. Если ваши приложения работают на 2–3 серверах, то можно обойтись и без Kubernetes, но если их десятки и сотни, то дальнейшее масштабирование, управление и апдейт будет сложнее без дополнительного инструмента оркестрации. Как раз таким и является Kubernetes;
	- автоматически развертывать, апдейтить, откатывать назад обновления, управлять состоянием контейнеров;
	- управлять нагрузкой и оперативно масштабироваться в большую или меньшую сторону.
	Если хотите блеснуть эрудицией, можно сказать, что Kubernetes — это детище Google, в k8s 8 означает 8 букв в слове kubernetes, а само название переводится с греческого как «кормчий, рулевой».
4. Как Kubernetes соотносится с Docker?
	Docker — это один из общепринятых стандартов контейнеризации. С его помощью мы упаковываем приложения в контейнеры, автоматизируем их запуск и развертывание, управление их жизненным циклом. Docker позволяет запускать один контейнер на одном хосте. А что если нужно запустить несколько контейнеров на разных хостах и как-то ими управлять?  
	Вот здесь приходит на помощь Kubernetes, который помогает настраивать сетевую связность Docker-контейнеров, запущенных на разных хостах, и оркестровать их.  
	То есть Docker — контейнер, Kubernetes — платформа для управления контейнерами, или оркестратор контейнеров.
[[Kubernetes#^3aef8d|К содержанию]] ^d7e87b
